<style>
#report_description {
	padding: 5px 0;
}
#result_table td .bar{
	height: 18px; 
	display:inline-block; 
	margin-right: 5px; 
	vertical-align:middle;
	background: #6bba70; /* Old browsers */
	background: -moz-linear-gradient(top, #6bba70 0%, #255e2b 100%); /* FF3.6+ */
	background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#6bba70), color-stop(100%,#255e2b)); /* Chrome,Safari4+ */
	background: -webkit-linear-gradient(top, #6bba70 0%,#255e2b 100%); /* Chrome10+,Safari5.1+ */
	background: -o-linear-gradient(top, #6bba70 0%,#255e2b 100%); /* Opera 11.10+ */
	background: -ms-linear-gradient(top, #6bba70 0%,#255e2b 100%); /* IE10+ */
	background: linear-gradient(top, #6bba70 0%,#255e2b 100%); /* W3C */
	filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#6bba70', endColorstr='#255e2b',GradientType=0 ); /* IE6-9 */
}
.currency {
	text-align:right;
}
.right, .rpad2 {
	text-align:right;
}
.center {
	text-align:center;
}
.show_query, #show_time_estimate {
	font-size: .8em;
}
</style>
{% if not nodata %}
	<table id='result_table'>
		{% if vertical %}
			{% for row in VerticalRows %}
			<tr>
				{% for value in row.values %}
				{% if value.is_header %}{% set tag = 'th' %}{% else %}{% set tag = 'td' %}{% endif %}
				<{{ tag }} class="{{ class }}">
					{% if value.raw %}{{ value.value|raw }}{% else %}{{ value.value }}{% endif %}
				</{{ tag }}>
				{% endfor %}
			</tr>
			{% endfor %}
		{% else %}
		<thead>
			<tr class='header'>
			{% for value in Rows[0].values %}
				<th class="{{value.class}}">{{value.key}}</th>
			{% endfor %}
			</tr>
		</thead>
		<tbody>
			{% for row in Rows %}
			<tr>
				{% for value in row.values %}
				<td class="{{value.class}}">
					{% if value.value %}
						{% if value.raw %}{{ value.value|raw }}{% else %}{{ value.value }}{% endif %}
					{% else %}
					&nbsp;
					{% endif %}
				{% endfor %}
			</tr>
			{% endfor %}
		</tbody>
		{% endif %}
	</table>

	{% if not vertical and not nodata %}
	<script type='text/javascript'>
	$('#result_table').dataTable({
		bPaginate: false,
		aaSorting: []
	});
	</script>
	{% endif %}
	<div style='clear:both;'></div>
{% endif %}

<p>Query took {{Time}} seconds</p>

{% if has_charts %}
<iframe src="{{base}}/report/chart/?{{report_querystring}}" id='chart_container' class="auto-height" scrolling="no" style='width:100%;' frameborder="0"></iframe>
<script>
  $('#chart_container').iframeAutoHeight();
</script>
{% endif %}

{% if Query_Formatted %}
<a href='#' class='show_query'>show query</a>
<div id='query_holder' style='display:none;'>
	{{Query_Formatted|raw}}
</div>
<script>
$('.show_query').click(function() {
	showing = $('#query_holder').css('display') == 'none';
	
	$('#query_holder').toggle(500);
	
	if(showing) {
		$('html, body').animate({scrollTop: $("#query_holder").offset().top}, 1000);
	}
	
	return false;
});
$('.included_report').each(function() {
	var self = $(this);
	self.css('display','none').css('background-color','#f4f4f4').css('padding-left','10px');
	var link = $('<a>').attr('href','#').text('View Included Report').css('display','block').click(function() {
		self.toggle(200);
		return false;
	});
	
	self.before(link);
});
</script>
{% endif %}
